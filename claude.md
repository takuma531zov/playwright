# Playwrightスクレイピング開発概要

## プロジェクト全体概要

本プロジェクトは、**営業リストに記載された法人のホームページURL** をもとに、**問い合わせフォームのURLを自動抽出**する仕組みの構築を目的としています。最終的には営業活動の効率化、人力によるURL確認作業の削減を目指します。

### 目的

- スプレッドシートにある企業ホームページURL（列L）を起点に、Playwrightを用いてフォームURLを抽出
- 抽出に失敗した場合は、Dify API（LLM）で補完
- 自動化された処理結果は再びスプレッドシートに反映

---

## 対象データ

- **Googleスプレッドシート**
  - 営業リストを管理
  - L列に法人ホームページのURLを格納
  - 結果出力用の列も同シート内に存在

---

## 使用技術スタック

| 分類 | ツール・技術 | 目的 |
|------|--------------|------|
| スプレッドシート連携 | Google Apps Script (GAS) | URL読み込み・結果書き戻し |
| クローリング | Node.js + TypeScript + Playwright | 問い合わせフォームURLの抽出 |
| 補完処理（AI） | Dify API (LLM) | 抽出失敗時の補完処理 |
| 環境管理 | pnpm, clasp | 開発環境とGAS連携 |
| リポジトリ管理 | GitHub | バージョン管理、CI/CD検討 |

---

## システム構成図

```plaintext
┌─────────────────────────────┐
│     Google スプレッドシート     │
│ ・営業リスト（L列にURL）         │
│ ・問い合わせフォームURL出力欄  │
└────────────┬──────────────┘
             │ URLリスト取得
             ▼
┌─────────────────────────────┐
│     Google Apps Script (GAS)    │
│ ・URL一覧を取得                  │
│ ・Playwrightスクリプトを起動     │
│ ・結果をスプレッドシートに反映   │
└────────────┬──────────────┘
             │ CSV/APIでURL送信
             ▼
┌─────────────────────────────┐
│ Node.js + Playwright             │
│ ・Webサイトアクセス              │
│ ・問い合わせフォームURLを抽出   │
│ ・抽出失敗時はDify APIにフォールバック│
└────────────┬──────────────┘
             ▼
┌─────────────────────────────┐
│         Dify API (LLM)           │
│ ・フォームURLの推測補完          │
│ ・自然言語処理により類推           │
└─────────────────────────────┘
